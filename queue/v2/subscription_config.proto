// file: proto/gcommon/v2/queue/subscription_config.proto
// version: 1.0.0
// guid: 27b1d56b-2e7b-4003-9ddd-6b30086ff0fb

edition = "2023";

package queue.v2;

import "common/v2/priority_level.proto";
import "common/v2/routing_strategy.proto";
import "common/v2/subscription_state.proto";
import "queue/v2/delivery_options.proto";
import "google/protobuf/go_features.proto";
import "buf/validate/validate.proto";

option features.(pb.go).api_level = API_OPAQUE;
option go_package = "github.com/jdfalk/gcommon/pkg/queue/v2";

// SubscriptionConfig describes how a consumer subscribes to a queue.
message SubscriptionConfig {
  // Name of the subscription.
  string name = 1 [
      (buf.validate.field).string.min_len = 1,
      (buf.validate.field).string.max_len = 100
    ];
  // Current state of the subscription.
  common.v2.SubscriptionState state = 2;
  // Message routing strategy for this subscription.
  common.v2.RoutingStrategy routing_strategy = 3;
  // Default priority applied to published messages if unspecified.
  common.v2.PriorityLevel default_priority = 4;
  // Delivery options controlling retries and dead letter handling.
  DeliveryOptions delivery_options = 5;
  // Maximum number of unacknowledged messages allowed.
  int32 max_inflight = 6;
}
