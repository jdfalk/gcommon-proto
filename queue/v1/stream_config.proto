// file: proto/gcommon/v1/queue/config/stream_config.proto
// file: proto/gcommon/v1/queue/stream_config.proto
// version: 1.0.0
// guid: 7a6b5c4d-3e2f-1a0b-9c8d-7e6f5a4b3c2d
//
// Message definitions for queue module
//
edition = "2023";

package queue.v1;

import "common/v1/stream_restart_policy.proto";
import "google/protobuf/duration.proto";
import "google/protobuf/go_features.proto";
import "buf/validate/validate.proto";


option features.(pb.go).api_level = API_OPAQUE;
option go_package = "github.com/jdfalk/gcommon/queue/";

/**
 * Configuration for streaming message consumption.
 */
message StreamConfig {
  // Maximum number of messages to buffer
  int32 buffer_size = 1 [(buf.validate.field).int32.gte = 0];

  // Timeout for stream read operations
  google.protobuf.Duration read_timeout = 2;

  // Whether to enable flow control
  bool flow_control_enabled = 3;

  // Maximum outstanding messages before flow control kicks in
  int32 max_outstanding_messages = 4 [(buf.validate.field).int32.gte = 0, (buf.validate.field).int32.lte = 150];

  // Maximum outstanding bytes before flow control kicks in
  int64 max_outstanding_bytes = 5 [(buf.validate.field).int64.gte = 0];

  // Whether to automatically acknowledge messages
  bool auto_ack = 6;

  // Acknowledgment deadline for manually acknowledged messages
  google.protobuf.Duration ack_deadline = 7;

  // Whether to enable message ordering
  bool enable_message_ordering = 8;

  // Stream restart policy on failure
  common.v1.StreamRestartPolicy restart_policy = 9;
}
