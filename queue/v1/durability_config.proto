// file: proto/gcommon/v1/queue/config/durability_config.proto
// file: proto/gcommon/v1/queue/durability_config.proto
// version: 1.0.0
// guid: 1a0b9c8d-7e6f-5a4b-3c2d-1e0f9a8b7c6d
//
// Message definitions for queue module
//
edition = "2023";

package queue.v1;

import "common/v1/ack_level.proto";
import "common/v1/flush_policy.proto";
import "google/protobuf/duration.proto";
import "google/protobuf/go_features.proto";
import "buf/validate/validate.proto";


option features.(pb.go).api_level = API_OPAQUE;
option go_package = "github.com/jdfalk/gcommon/queue/";

/**
 * Configuration for message durability and persistence.
 */
message DurabilityConfig {
  // Whether messages are persisted to disk
  bool persistent = 1;

  // Flush policy for writing messages to storage
  common.v1.FlushPolicy flush_policy = 2;

  // Number of replicas for each message
  int32 replication_factor = 3 [(buf.validate.field).int32.gte = 0];

  // Acknowledgment level required before considering message durable
  common.v1.AckLevel ack_level = 4;

  // Timeout for durability operations
  google.protobuf.Duration durability_timeout = 5;

  // Whether to use write-ahead logging
  bool write_ahead_log = 6;

  // Sync frequency for flushing to disk
  google.protobuf.Duration sync_interval = 7;

  // Whether to verify checksums on read
  bool verify_checksums = 8;
}
