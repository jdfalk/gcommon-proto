// file: proto/gcommon/v2/config/validation_rule.proto
// version: 1.0.0
// guid: 6cc709c2-996e-4e1c-aa4d-0c7741fadb21

edition = "2023";

package config.v2;

import "commonpb/v2/validation_severity.proto";
import "google/protobuf/go_features.proto";
import "buf/validate/validate.proto";

option features.(pb.go).api_level = API_OPAQUE;
option go_package = "github.com/jdfalk/gcommon/pkg/configpb/v2";

message ValidationRule {
  // Rule name
  string name = 1 [
      (buf.validate.field).string.min_len = 1,
      (buf.validate.field).string.max_len = 100
    ];

  // Rule description
  string description = 2 [ (buf.validate.field).string.max_len = 1000 ];

  // Rule expression
  string expression = 3;

  // Error message if validation fails
  string error_message = 4;

  // Rule severity
  common.v2.ValidationSeverity severity = 5;

  // Parameters this rule applies to
  repeated string parameters = 6;

  // Rule conditions
  map<string, string> conditions = 7;
}
