// file: pkg/queue/proto/reset_queue_stats_response.proto
// version: 1.1.0
// Response to queue statistics reset operations

edition = "2023";

package gcommon.v1.queue;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/jdfalk/gcommon/pkg/queue/proto;queuepb";

// ResetQueueStatsResponse returns the result of resetting queue statistics
message ResetQueueStatsResponse {
  // Success status of the reset operation
  bool success = 1;

  // Queue identifier whose stats were reset
  string queue_id = 2;

  // Timestamp when reset operation completed
  google.protobuf.Timestamp reset_at = 3;

  // Statistics that were preserved before reset
  PreservedStats preserved_stats = 4;

  // Types of statistics that were reset
  repeated string reset_stat_types = 5;

  // Types of statistics that were preserved
  repeated string preserved_stat_types = 6;

  // Error message if reset failed
  string error_message = 7;

  // Error code for programmatic handling
  string error_code = 8;

  // Warning messages about the reset operation
  repeated string warnings = 9;

  // Reset operation details
  ResetDetails reset_details = 10;

  // Operation metadata
  map<string, string> metadata = 11;
}

// Statistics that were preserved during reset
message PreservedStats {
  // Total message count (lifetime)
  int64 lifetime_message_count = 1;

  // Queue creation timestamp
  google.protobuf.Timestamp created_at = 2;

  // Last configuration change timestamp
  google.protobuf.Timestamp last_config_change = 3;

  // Peak message count (historical high)
  int64 peak_message_count = 4;

  // Peak throughput (historical high)
  double peak_throughput = 5;

  // Total uptime (milliseconds)
  int64 total_uptime_ms = 6;
}

// Details about the reset operation
message ResetDetails {
  // Number of metrics reset
  int32 metrics_reset_count = 1;

  // Number of counters reset
  int32 counters_reset_count = 2;

  // Number of histograms reset
  int32 histograms_reset_count = 3;

  // Number of partitions affected
  int32 partitions_affected = 4;

  // Time taken to complete reset (milliseconds)
  int64 reset_duration_ms = 5;

  // Whether reset was partial or complete
  bool partial_reset = 6;

  // Reason for reset operation
  string reset_reason = 7;

  // User or system that initiated reset
  string initiated_by = 8;
}
