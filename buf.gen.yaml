version: v2
managed:
  enabled: true
  disable:
    - file_option: go_package
      module: buf.build/googleapis/googleapis
plugins:
  # Go - built-in protoc plugin
  - protoc_builtin: go
    out: .
    opt:
      - paths=source_relative
      - Mgoogle/protobuf/timestamp.proto=google.golang.org/protobuf/types/known/timestamppb
      - Mgoogle/protobuf/duration.proto=google.golang.org/protobuf/types/known/durationpb
      - Mgoogle/protobuf/empty.proto=google.golang.org/protobuf/types/known/emptypb
      - Mgoogle/protobuf/any.proto=google.golang.org/protobuf/types/known/anypb
  # Go gRPC - requires remote plugin
  - remote: buf.build/grpc/go:v1.5.1
    out: .
    opt:
      - paths=source_relative
      - require_unimplemented_servers=false
  # Python - built-in protoc plugin (no paths option)
  - protoc_builtin: python
    out: sdks/python
  # Python gRPC - remote plugin
  - remote: buf.build/grpc/python
    out: sdks/python
  # TypeScript and other language support disabled until Edition 2023 support improves
  # Will revisit when ts-proto or other TypeScript plugins support Edition 2023
