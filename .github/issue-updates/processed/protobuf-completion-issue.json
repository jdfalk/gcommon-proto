{
  "action": "create",
  "title": "Complete GCommon Protobuf 1-1-1 Migration and Missing File Implementation",
  "description": "## Comprehensive Protobuf Implementation Issue\n\n### üéØ Overview\nThis issue tracks the completion of GCommon's protobuf architecture migration to the modern 1-1-1 pattern (one message/enum/service per file) and implementation of all missing files. Based on comprehensive ecosystem analysis, we have identified specific files that need creation and migration.\n\n### üìä Current Status Analysis\n- **Total protobuf files**: 1,005\n- **Files following 1-1-1 pattern**: 951/1,005 (94.6%)\n- **Files needing migration**: 54 files still use MULTI pattern\n- **Missing files requiring creation**: 9 critical files\n- **Build status**: ‚ùå FAILING due to missing imports\n\n### üî• CRITICAL: Missing Files (Blocking Compilation)\nThese files are imported by existing services but don't exist, preventing `buf generate` from succeeding:\n\n1. **Authentication Module (Session Management)**:\n   - `pkg/auth/proto/requests/list_user_sessions_request.proto`\n   - `pkg/auth/proto/requests/terminate_session_request.proto` \n   - `pkg/auth/proto/responses/list_user_sessions_response.proto`\n   - Required by: `pkg/auth/proto/services/session_service.proto`\n\n2. **Queue Module (Core Operations)**:\n   - `pkg/queue/proto/requests/enqueue_request.proto`\n   - `pkg/queue/proto/requests/dequeue_request.proto`\n   - `pkg/queue/proto/responses/enqueue_response.proto`\n   - `pkg/queue/proto/responses/dequeue_response.proto`\n   - Required by: `pkg/queue/proto/services/queue_service.proto`\n\n3. **Web Module (HTTP Handling)**:\n   - `pkg/web/proto/requests/http_request.proto`\n   - `pkg/web/proto/responses/http_response.proto`\n   - Required by: `pkg/web/proto/services/web_service.proto`\n\n### üèóÔ∏è Implementation Strategy\n\n#### Phase 1: Critical Missing Files (HIGH PRIORITY)\n**Objective**: Restore compilation capability\n**Timeline**: Immediate\n\n**For each missing file, follow this template**:\n\n```protobuf\n// file: pkg/[module]/proto/[category]/[filename].proto\n// version: 1.0.0\n// guid: [generate-new-guid]\n\nedition = \"2023\";\n\npackage gcommon.v1.[module];\n\noption go_package = \"github.com/jdfalk/gcommon/pkg/[module]/proto;[module]pb\";\n\n// Standard imports\nimport \"google/protobuf/timestamp.proto\";\nimport \"google/protobuf/duration.proto\";\n\n// Types imports (check if shared types needed)\nimport \"pkg/common/proto/messages/request_metadata.proto\";\nimport \"pkg/common/proto/messages/error.proto\";\n\n// Module-specific imports\n// Add imports for any referenced types\n\n/**\n * [Description of the message/request/response]\n * Follows 1-1-1 pattern: one message per file\n */\nmessage [MessageName] {\n  // Required fields (1-10)\n  string id = 1;\n  \n  // Optional fields (11-50)\n  RequestMetadata metadata = 11;\n  \n  // Timestamps (51-60)\n  google.protobuf.Timestamp created_at = 51;\n  \n  // Status/error fields (61-70)\n  Error error = 61;\n}\n```\n\n#### Phase 2: Legacy Multi-File Migration (MEDIUM PRIORITY)\n**Objective**: Complete 1-1-1 migration for remaining 54 files\n**Timeline**: After Phase 1 completion\n\n**Files requiring 1-1-1 migration** (contains multiple definitions):\n- `pkg/web/proto/web.proto` - 123 definitions (LARGEST)\n- `pkg/auth/proto/auth.proto` - Multiple services/messages  \n- Various other files with MULTI designation\n\n**Migration Process**:\n1. Identify all messages, enums, and services in multi-file\n2. Create individual files following naming convention\n3. Move each definition to its own file\n4. Update all import statements\n5. Test compilation with `buf generate`\n6. Remove original multi-file\n\n#### Phase 3: Types Package Consolidation (LOW PRIORITY)\n**Objective**: Optimize type sharing and eliminate any remaining duplicates\n**Timeline**: After Phases 1-2 completion\n\n### üõ†Ô∏è Implementation Guidelines\n\n#### File Creation Checklist\nFor each new protobuf file:\n- [ ] Includes required file header (file path, version, GUID)\n- [ ] Uses `edition = \"2023\"` syntax\n- [ ] Follows proper package naming: `gcommon.v1.[module]`\n- [ ] Sets correct go_package option\n- [ ] Imports types from `types/` packages where possible\n- [ ] Follows field numbering conventions (required 1-10, optional 11-50, etc.)\n- [ ] Includes comprehensive documentation\n- [ ] Contains exactly ONE definition (message, enum, or service)\n- [ ] Validates with `buf lint`\n- [ ] Compiles successfully with `buf generate`\n\n#### Naming Conventions\n- **Requests**: `[action]_request.proto` (e.g., `create_user_request.proto`)\n- **Responses**: `[action]_response.proto` (e.g., `create_user_response.proto`) \n- **Messages**: `[entity_name].proto` (e.g., `user_info.proto`)\n- **Enums**: `[enum_name].proto` (e.g., `user_status.proto`)\n- **Services**: `[service_name]_service.proto` (e.g., `auth_service.proto`)\n\n#### Import Strategy\n1. **Standard protobuf imports first**\n2. **Common types from `pkg/common/proto/types/`**\n3. **Module-specific types from `pkg/[module]/proto/types/`**\n4. **Other module imports last**\n\n### üß™ Testing & Validation\n\n#### Compilation Tests\n```bash\n# Test individual module\nbuf lint --path pkg/auth/proto/\nbuf generate --path pkg/auth/proto/\n\n# Test entire repository\nbuf lint\nbuf generate\n\n# Test Go compilation\ngo build ./...\ngo mod tidy\n```\n\n#### Quality Assurance\n- All files follow 1-1-1 pattern\n- No type duplications\n- All imports resolve correctly  \n- Generated Go code compiles\n- No circular dependencies\n- Consistent documentation\n\n### üìö Reference Documentation\n\n- **Main Strategy Doc**: `docs/PROTOBUF_STRATEGY.md`\n- **Ecosystem Analysis**: `analysis_results/interactive_explorer.html`\n- **Dependency Mapping**: `analysis_results/ecosystem_data.json`\n- **ASCII Diagram**: `analysis_results/ascii_diagram.txt`\n\n### üéØ Success Criteria\n\n1. **‚úÖ All 9 missing files created and implemented**\n2. **‚úÖ `buf generate` executes without errors**\n3. **‚úÖ `go build ./...` completes successfully**\n4. **‚úÖ All 1,005 files follow 1-1-1 pattern**\n5. **‚úÖ No type duplications remain**\n6. **‚úÖ 100% import resolution**\n\n### üë®‚Äçüíª Junior Developer Notes\n\n**Start with the missing files in this exact order**:\n1. `pkg/auth/proto/requests/list_user_sessions_request.proto`\n2. `pkg/auth/proto/requests/terminate_session_request.proto`\n3. `pkg/auth/proto/responses/list_user_sessions_response.proto`\n4. `pkg/queue/proto/requests/enqueue_request.proto`\n5. `pkg/queue/proto/requests/dequeue_request.proto`\n6. `pkg/queue/proto/responses/enqueue_response.proto` \n7. `pkg/queue/proto/responses/dequeue_response.proto`\n8. `pkg/web/proto/requests/http_request.proto`\n9. `pkg/web/proto/responses/http_response.proto`\n\n**After creating each file**:\n- Test with `buf lint [filepath]`\n- Commit individually with descriptive message\n- Test overall compilation with `buf generate`\n\n**Need help?**\n- Reference existing similar files in the same module\n- Check `docs/PROTOBUF_STRATEGY.md` for patterns\n- Look at the interactive analysis at `analysis_results/interactive_explorer.html`\n- Ask questions early and often!\n\n### üöÄ Getting Started\n\n1. **Setup**: Read `docs/PROTOBUF_STRATEGY.md` completely\n2. **Analysis**: Open `analysis_results/interactive_explorer.html` in browser\n3. **Start**: Create the first missing file using the template above\n4. **Test**: Run `buf lint` and `buf generate` after each file\n5. **Iterate**: Continue through the missing files list\n6. **Validate**: Ensure `buf generate` succeeds after all missing files are created\n\nThis is a critical infrastructure issue that will unblock all protobuf development in the GCommon repository. Take your time, follow the patterns, and ask questions when needed!",
  "priority": "HIGH",
  "labels": [
    "protobuf",
    "infrastructure",
    "1-1-1-migration",
    "missing-files",
    "compilation-blocker"
  ],
  "assignee": "",
  "milestone": "",
  "projects": [],
  "file_modified_at": "2025-07-25T02:11:13.752857+00:00",
  "file_created_at": "2025-07-25T02:11:13.752748+00:00",
  "created_at": "2025-07-25T02:11:13.752748+00:00",
  "timestamp_extracted_at": "2025-07-26T23:40:50.535438+00:00",
  "guid": "4317c93f-62ed-4d96-af81-b93677a054be",
  "processing_metadata": {
    "enhanced_at": "2025-07-26T23:40:50.535486+00:00",
    "source_file": ".github/issue-updates/processed/protobuf-completion-issue.json",
    "version": "2.0.0"
  },
  "processed_at": "2025-07-26T23:40:50.778351+00:00"
}
