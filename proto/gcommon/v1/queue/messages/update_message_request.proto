// file: proto/gcommon/v1/queue/messages/update_message_request.proto
// version: 1.0.0
// guid: 78c4ac61-c4dc-4bfc-bfa1-93a723303fbb

edition = "2023";

package gcommon.v1.queue;

import "gcommon/v1/queue/messages/content_update.proto";
import "gcommon/v1/queue/messages/message_update_properties.proto";
import "gcommon/v1/queue/messages/metadata_update.proto";
import "gcommon/v1/queue/messages/priority_update.proto";
import "gcommon/v1/queue/messages/update_condition.proto";
import "gcommon/v1/queue/messages/visibility_update.proto";
import "google/protobuf/go_features.proto";

option features.(pb.go).api_level = API_OPAQUE;
option go_package = "github.com/jdfalk/gcommon/sdks/go/gcommon/v1/queue";

message UpdateMessageRequest {
  // Message identifier to update
  string message_id = 1;

  // Topic or queue containing the message
  string topic = 2;

  // Partition ID (if applicable)
  int32 partition_id = 3;

  // Message offset (for precise identification)
  int64 message_offset = 4;

  // Updated message properties
  gcommon.v1.queue.MessageUpdateProperties properties = 5;

  // Update visibility timeout for the message
  gcommon.v1.queue.VisibilityUpdate visibility_update = 6;

  // Update message priority
  gcommon.v1.queue.PriorityUpdate priority_update = 7;

  // Update message metadata
  gcommon.v1.queue.MetadataUpdate metadata_update = 8;

  // Update message content (if allowed)
  gcommon.v1.queue.ContentUpdate content_update = 9;

  // Specify which fields to update
  repeated string update_fields = 10;

  // Conditional update based on current state
  gcommon.v1.queue.UpdateCondition condition = 11;

  // Update operation metadata
  map<string, string> operation_metadata = 12;
}
