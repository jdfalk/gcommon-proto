// file: proto/gcommon/v1/database/services/migration_service.proto
// version: 1.0.0
// guid: e6a810ad-ad41-4afb-9340-84b009cfdd59

edition = "2023";

package gcommon.v1.database.services;

import "google/protobuf/go_features.proto";
import "proto/gcommon/v1/database/schema/list_migrations_request.proto";
import "proto/gcommon/v1/database/schema/list_migrations_response.proto";
import "proto/gcommon/v1/database/schema/revert_migration_request.proto";
import "proto/gcommon/v1/database/schema/revert_migration_response.proto";
import "proto/gcommon/v1/database/schema/run_migration_request.proto";
import "proto/gcommon/v1/database/schema/run_migration_response.proto";
import "proto/gcommon/v1/database/schema/get_migration_status_request.proto";
import "proto/gcommon/v1/database/schema/get_migration_status_response.proto";

option features.(pb.go).api_level = API_OPAQUE;
option go_package = "github.com/jdfalk/gcommon/proto/gcommon/v1/database/services";

/**
 * MigrationService manages database schema migrations.
 */
service MigrationService {
  // Apply one or more migration scripts
  rpc ApplyMigration(RunMigrationRequest) returns (RunMigrationResponse);

  // Revert to a previous migration version
  rpc RevertMigration(RevertMigrationRequest) returns (RevertMigrationResponse);

  // Retrieve migration status for a database
  rpc GetMigrationStatus(GetMigrationStatusRequest) returns (GetMigrationStatusResponse);

  // List migrations and their status
  rpc ListMigrations(ListMigrationsRequest) returns (ListMigrationsResponse);
}
