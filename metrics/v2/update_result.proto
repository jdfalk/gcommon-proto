// file: proto/gcommon/v2/metrics/v2/update_result.proto
// version: 1.1.0
// guid: cd6fac61-b122-455b-a74b-34935efa71b0

edition = "2023";

package metrics.v2;

import "common/v2/metrics_config_change.proto";
import "common/v2/update_action.proto";
import "google/protobuf/go_features.proto";
import "buf/validate/validate.proto";


option features.(pb.go).api_level = API_OPAQUE;
option go_package = "github.com/jdfalk/gcommon/pkg/metricspb/v2";

/**
 * UpdateResult contains information about what was changed.
 */
message UpdateResult {
  // What update action was taken
  common.v2.UpdateAction action = 1;

  // Configuration changes that were applied
  repeated common.v2.MetricsConfigChange config_changes = 2 [(buf.validate.field).repeated.min_items = 1];

  // Settings that were updated
  repeated string updated_settings = 3 [(buf.validate.field).repeated.min_items = 1];

  // Settings that were removed
  repeated string removed_settings = 4 [(buf.validate.field).repeated.min_items = 1];

  // Whether a restart occurred
  bool restarted = 5;

  // Update strategy that was used
  string strategy_used = 6 [(buf.validate.field).string.min_len = 1];

  // Time taken for the update
  string update_duration = 7 [(buf.validate.field).string.min_len = 1];
}
